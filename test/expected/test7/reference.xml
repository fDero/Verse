<!-- file: test/snippets/test7/main.verse -->
<FUNCDEF name="fibonacci">
	<ARG name="n" type="Int"/>
	<FUNCDEF name="swap">
		<ARG name="a" type="Int*"/>
		<ARG name="b" type="Int*"/>
		<VAR name="tmp" type="Int"/>
		<ASSIGNMENT>
			<IDENTIFIER name="tmp"/>
			<OPERATOR text="#">
				<IDENTIFIER name="a"/>
			</OPERATOR>
		</ASSIGNMENT>
		<ASSIGNMENT>
			<OPERATOR text="#">
				<IDENTIFIER name="a"/>
			</OPERATOR>
			<OPERATOR text="#">
				<IDENTIFIER name="b"/>
			</OPERATOR>
		</ASSIGNMENT>
		<ASSIGNMENT>
			<OPERATOR text="#">
				<IDENTIFIER name="b"/>
			</OPERATOR>
			<IDENTIFIER name="tmp"/>
		</ASSIGNMENT>
	</FUNCDEF>
	<VAR name="a" type="Int"/>
	<ASSIGNMENT>
		<IDENTIFIER name="a"/>
		<LITERAL value="1" pseudotype="int"/>
	</ASSIGNMENT>
	<VAR name="b" type="Int"/>
	<ASSIGNMENT>
		<IDENTIFIER name="b"/>
		<LITERAL value="1" pseudotype="int"/>
	</ASSIGNMENT>
	<WHILE>
		<OPERATOR text=">">
			<IDENTIFIER name="n"/>
			<LITERAL value="0" pseudotype="int"/>
		</OPERATOR>
		<CODE>
			<FUNCALL name="swap">
				<OPERATOR text=",">
					<OPERATOR text="#">
						<IDENTIFIER name="a"/>
					</OPERATOR>
					<OPERATOR text="#">
						<IDENTIFIER name="b"/>
					</OPERATOR>
				</OPERATOR>
			</FUNCALL>
			<ASSIGNMENT>
				<OPERATOR text="#">
					<IDENTIFIER name="b"/>
				</OPERATOR>
				<OPERATOR text="+">
					<OPERATOR text="#">
						<IDENTIFIER name="b"/>
					</OPERATOR>
					<LITERAL value="1" pseudotype="int"/>
				</OPERATOR>
			</ASSIGNMENT>
			<ASSIGNMENT>
				<IDENTIFIER name="n"/>
				<OPERATOR text="-">
					<IDENTIFIER name="n"/>
					<LITERAL value="1" pseudotype="int"/>
				</OPERATOR>
			</ASSIGNMENT>
		<CODE>
	</WHILE>
	<ASSIGNMENT>
		<IDENTIFIER name="result"/>
		<IDENTIFIER name="a"/>
	</ASSIGNMENT>
</FUNCDEF>
